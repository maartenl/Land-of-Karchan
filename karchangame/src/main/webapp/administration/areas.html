<!DOCTYPE html>
<!--
Copyright (C) 2014 maartenl

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<html ng-app="karchan">
    <title>Admin - Areas</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-rc.4/angular.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/restangular/1.3.1/restangular.min.js"></script>
    <script src="javascripts/areas.js"></script>         
    <link rel="stylesheet" href="css/admin.css" /> 
</head>
<body>
    <h1>Areas</h1>
    <div ng-controller="MyController">
        <p><label for="filter">Filter on owner:</label>
            <input id="filter" name="filter" type="text" size="30" ng-model="filter" placeholder="Enter a name here"/> <a href="javascript:void(0)"  ng-click="setFilter()">Filter</a> <a href="javascript:void(0)" ng-click="removeFilter()">Unfilter</a>
        </p> 
        <a href="javascript:void(0)" ng-click="reload()">Refresh</a> 
        <table>
            <tbody>
                <tr>
                    <th>Area</th>
                    <th>Short description</th>
                    <th>Creation</th>		
                    <th>Owner</th>
                    <th></th>
                </tr>
                <tr ng-repeat="area in displayAreas" ng-class="{even: !$even, odd: !$odd}">
                    <td>{{area.area}}</td>
                    <td>{{area.shortdescription}}</td>
                    <td>{{area.creation}}</td>
                    <td>{{area.owner.name}}</td>
                    <td><a href="javascript:void(0)" ng-click="edit($index)">Edit</a> 
                        <a href="javascript:void(0)" ng-click="copy($index)">Copy</a> 
                        <a href="javascript:void(0)" ng-click="remove($index)">Delete</a> 
                        <a href="javascript:void(0)" ng-click="disown($index)">Disown</a></td>
                </tr>
            </tbody>
        </table>
        <hr>
        <p>Area: {{area.area}}</p>
        <p>Short description {{area.shortdescription}}</p>
        <p>Description <pre>{{area.description}}</pre></p>
    <hr/>
    <form name="form" novalidate>
        <fieldset>
            <legend>Area</legend>
            <p><label for="area">Area:</label>
                <input id="area" name="area" type="text" size="80" ng-model="area.area" placeholder="Enter a name here" required ng-pattern="/^[a-zA-Z]{3,}$/">
            </p>
            <p><label for="shortdesc">Short description:</label>
                <input id="shortdesc" name="shortdesc" type="text" ng-model="area.shortdescription" placeholder="Enter a shortdescription here" ng-minlength=1 ng-maxlength=255> 
            </p>
            <p><label for="description">Description:</label>
                <textarea id="description" name="description" cols="80" rows="25" type="text" ng-model="area.description" placeholder="Enter your description here"></textarea>
            </p>
            <p>
                <button ng-click="create()" class="button">New</button>
                <button ng-click="update()" class="button" ng-disabled="form.$invalid">Submit</button>
            </p></fieldset>
        <fieldset>
            <legend>Validation errors</legend>
            <div ng-show="errorDetails !== null">
                <p>Timestamp: <span>{{ errorDetails.timestamp}}</span></p>
                <p>Errormessage: <span>{{errorDetails.errormessage}}</span></p>
                <p>Stacktrace: <span>{{errorDetails.stacktrace}}</span></p>
                <p>User: <span>{{errorDetails.user}}</span></p>
                <p>Browser CodeName: <span>{{navigator.appCodeName}}</span></p>
                <p>Browser Name: <span>{{navigator.appName}}</span></p>
                <p>Browser Version: <span>{{navigator.appVersion}}</span></p>
                <p>Cookies Enabled: <span>{{navigator.cookieEnabled}}</span></p>
                <p>Platform: <span>{{navigator.platform}}</span></p>
                <p>User-agent header: <span>{{navigator.userAgent}}</span></p>
            </div>
        </fieldset>
    </form>
</div>
</body>
</html>
