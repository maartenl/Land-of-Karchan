<!DOCTYPE html>
<!--
Copyright (C) 2014 maartenl

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<html ng-app="karchan">
    <title>Admin - Scripts</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-rc.4/angular.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/restangular/1.3.1/restangular.min.js"></script>
    <script src="javascripts/scripts.js"></script>         
    <link rel="stylesheet" href="css/admin.css" /> 
</head>
<body>
    <h1>Admin - Scripts</h1>
    <div ng-controller="MyController">
        <p>
            <a href="javascript:void(0)" ng-click="reload('A')">A</a>
            <a href="javascript:void(0)" ng-click="reload('B')">B</a>
            <a href="javascript:void(0)" ng-click="reload('C')">C</a>
            <a href="javascript:void(0)" ng-click="reload('D')">D</a>
            <a href="javascript:void(0)" ng-click="reload('E')">E</a>
            <a href="javascript:void(0)" ng-click="reload('F')">F</a>
            <a href="javascript:void(0)" ng-click="reload('G')">G</a>
            <a href="javascript:void(0)" ng-click="reload('H')">H</a>
            <a href="javascript:void(0)" ng-click="reload('I')">I</a>
            <a href="javascript:void(0)" ng-click="reload('J')">J</a>
            <a href="javascript:void(0)" ng-click="reload('K')">K</a>
            <a href="javascript:void(0)" ng-click="reload('L')">L</a>
            <a href="javascript:void(0)" ng-click="reload('M')">M</a>
            <a href="javascript:void(0)" ng-click="reload('N')">N</a>
            <a href="javascript:void(0)" ng-click="reload('O')">O</a>
            <a href="javascript:void(0)" ng-click="reload('P')">P</a>
            <a href="javascript:void(0)" ng-click="reload('Q')">Q</a>
            <a href="javascript:void(0)" ng-click="reload('R')">R</a>
            <a href="javascript:void(0)" ng-click="reload('S')">S</a>
            <a href="javascript:void(0)" ng-click="reload('T')">T</a>
            <a href="javascript:void(0)" ng-click="reload('U')">U</a>
            <a href="javascript:void(0)" ng-click="reload('V')">V</a>
            <a href="javascript:void(0)" ng-click="reload('W')">W</a>
            <a href="javascript:void(0)" ng-click="reload('X')">X</a>
            <a href="javascript:void(0)" ng-click="reload('Y')">Y</a>
            <a href="javascript:void(0)" ng-click="reload('Z')">Z</a>
        </p>
        <table>
            <tbody>
                <tr>
                    <th>Name</th>
                    <th>Creation</th>		
                    <th>Owner</th>
                    <th></th>
                </tr>
                <tr ng-repeat="method in methods" ng-class="{even: !$even, odd: !$odd}">
                    <td>{{method.name}}</td>
                    <td>{{method.creation}}</td>
                    <td>{{method.owner.name}}</td>
                    <td><a href="javascript:void(0)" ng-click="edit($index)">Edit</a> 
                        <a href="javascript:void(0)" ng-click="copy($index)">Copy</a> 
                        <a href="javascript:void(0)" ng-click="remove($index)">Delete</a> 
                        <a href="javascript:void(0)" ng-click="disown($index)">Disown</a></td>
                </tr>
            </tbody>
        </table>
        <hr>
        <p>Name: {{method.name}}</p>
        <p>Source: <pre>{{method.src}}</pre></p>
    <hr/>
    <form name="form" novalidate>
        <fieldset>
            <legend>Script</legend>
            <p><label for="name">Name:</label>
                <input id="name" name="name" type="text" size="80" ng-model="method.name" placeholder="Enter a name here" required ng-minlength=5 ng-maxlength=180  ng-pattern="/^[\\.0-9a-zA-Z]{5,}$/">
            </p>           
            <p><label for="src">Source:</label>
                <textarea id="src" name="src" cols="80" rows="25" type="text" ng-model="method.src" placeholder="Enter your javascript body here"></textarea>
            </p>
            <p>
                <button ng-click="create()" class="button">New</button>
                <button ng-click="update()" class="button" ng-disabled="form.$invalid">Submit</button>
            </p></fieldset>
        <fieldset>
            <legend>Validation errors</legend>
            <div ng-show="errorDetails !== null">
                <p>Timestamp: <span>{{ errorDetails.timestamp}}</span></p>
                <p>Errormessage: <span>{{errorDetails.errormessage}}</span></p>
                <p>Stacktrace: <span>{{errorDetails.stacktrace}}</span></p>
                <p>User: <span>{{errorDetails.user}}</span></p>
                <p>Browser CodeName: <span>{{navigator.appCodeName}}</span></p>
                <p>Browser Name: <span>{{navigator.appName}}</span></p>
                <p>Browser Version: <span>{{navigator.appVersion}}</span></p>
                <p>Cookies Enabled: <span>{{navigator.cookieEnabled}}</span></p>
                <p>Platform: <span>{{navigator.platform}}</span></p>
                <p>User-agent header: <span>{{navigator.userAgent}}</span></p>
            </div>
        </fieldset>
    </form>
</div>
<p><a href="index.html">Back</a></p>
</body>
</html>
