Changes to the database
-----------------------

- changes " valuable" to "valuable" for 36,37,38.
- update mm_items set description = replace(description,
"http://www.karchan.org/","/") where description like "%karchan.org%";
- update mm_rooms set contents = replace(contents,
"http://www.karchan.org/","/") where contents like "%karchan.org%";
- added help for eyebrow command
- alter table mm_rooms add (area varchar(49) not null default "Main");    
- create table mm_area (area varchar(49) not null primary key, description
text not null, shortdesc varchar(255) not null, owner varchar(20) , creation
timestamp);
- insert into mm_area values("Main", "The Land of Karchan is split up onto
different areas. This is the main area, and the area that is used by new
characters for exploring and learning about the way the game works.", "The
Main Area of Karchan", "Karn", null);
- create table mm_log (creation timestamp not null, name varchar(20) not
null, message varchar(255) not null, primary key (creation, name, message));
- update mm_usertable set password=password(password)
- alter table mm_log add (addendum text);
- alter table mm_usertable alter alignment set default 8;
- update mm_usertable set alignment=8 where alignment=0;
- alter table mm_usertable alter movementstats set default 1000;
- update mm_usertable set movementstats=1000 where movementstats=0;
- CREATE TABLE mm_commands (
  id int(11) NOT NULL default '0',
  callable int(1) default 0,
  command varchar(255) NOT NULL,
  method_name varchar(52) NOT NULL,
  room int(11) NULL,
  owner varchar(20),
  creation timestamp,
  PRIMARY KEY  (id, command)
);
- CREATE TABLE mm_methods (
  name varchar(52) NOT NULL,
  src text NOT NULL,
  owner varchar(20),
  creation timestamp,
  PRIMARY KEY  (name)
);
// - mm_action
- CREATE TABLE mm_events (
  eventid int(11) NOT NULL,
  name varchar(32) NULL,
  month int(11) NOT NULL default '-1',
  dayofmonth int(11) NOT NULL default '-1',
  hour int(11) NOT NULL default '-1',
  minute int(11) NOT NULL default '-1',
  dayofweek int(11) NOT NULL default '-1',
  callable int(2) NOT NULL default '1',
  method_name varchar(52) NOT NULL,
  room int(11),
  owner varchar(20),
  creation timestamp,
  PRIMARY KEY  (eventid)
);
- create table mm_answers (name varchar(20) not null, question varchar(80)
not null, answer text not null, primary key(name, question));
- create table scratchpad (id int not null primary key, scratch longblob not
null,   owner varchar(20),
  creation timestamp);
- create table mm_commandlog (stamp timestamp not null, name varchar(20) not
null, command varchar(255) not null, primary key(stamp, name));
- alter table mm_events alter callable set default 0;
- alter table mm_admin add (email varchar(80) not null default "");
- alter table mm_items add (capacity int, isopenable int(1) not null default
0, keyid int, containtype int);


Creating a dupe database
------------------------

delete from mm_admin;
delete from mm_bantable;
delete from mm_charattributes;
delete from mm_charitemtable;
delete from mm_itemattributes;
delete from mm_itemitemtable;
delete from mm_items;
delete from mm_itemtable;
delete from mm_log;
delete from mm_logonmessage;
delete from mm_mailtable;
delete from mm_roomattributes;
delete from mm_roomitemtable;
delete from mm_rooms;
delete from mm_shopkeeperitems;
delete from mm_sillynamestable;
delete from mm_unbantable;
delete from mm_usertable;

insert into mm_bantable
select * 
from mud.bantable;
insert into mm_items
select *, null, now() 
from mud.items;
insert into mm_logonmessage
select *
from mud.logonmessage;
insert into mm_mailtable
select *
from mud.mailtable;
insert into mm_rooms
select *, null, now(), "Main"
from mud.rooms;
insert into mm_sillynamestable
select *
from mud.sillynamestable;
insert into mm_unbantable
select *
from mud.unbantable;
insert into mm_usertable
select *, null, now()
from mud.usertable;

creating board system
---------------------
create table mm_boardmessages
(boardid varchar(20) not null,
name varchar(20) not null,
posttime timestamp not null,
message text,
primary key (boardid, name, posttime));

create table mm_boards
(id int not null primary key,
name varchar(80) not null,
description text not null,
owner varchar(20) not null,
creation timestamp not null);
insert into mm_boards values(1, "public", "", "Karn", now());
insert into mm_boards values(2,"logonmessage","","Karn",now());

setting roomitems
-----------------
select concat(
"insert into mm_itemtable (itemid, creation, owner)
values(", id, ",'",  now(), "',null);\n\n",
"insert into mm_roomitemtable (id, room, search)
select id,", room, ", null 
from mm_itemtable 
where id IS NULL;"

)
from mud.tmp_itemtable
where id < 0;

SELECT * FROM tbl_name WHERE auto_col IS NULL

insert into mm_roomitemtable
(id, room, search)
select mm_itemtable.id, tmp.room, null
from mm_itemtable, mud.tmp_itemtable as tmp
where mm_itemtable.itemid = tmp.itemid
amd tmp.room <> 0 
and (tmp.search = null or tmp.search = "");

retrieving someones inventory
-----------------------------
amount multiplied with ...
insert into mm_itemtable
(itemid, creation, owner)
select (id, now(), null)
from mud.tmp_itemtable
where belongsto = ?;

insert into mm_charitemtable
(id, belongsto)
select id, ?
from mm_itemtable
where id > x

bugs
----
create table bugs (title varchar(255) not null, description text, answer
text, closed int(1) default 0, name varchar(20) not null,
creation datetime not null
primary key);

