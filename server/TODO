TODO
----

- make the admin scripts so that deps can make changes and changes are
committed to the log and the owner of the object is changed appropriately.
- Add 'plurals' to the items. (bucket -> buckets)
- logging is split up into the different characters. This makes it easier to
debug in a production environment.
- remove gold,silver from mm_usertable, mm_items,only use copper as a
flat-base value.
- boards
- add %SLONG, %TLONG
- fighting
- inserts and deletes of items/rooms/methods/commands/events
- insert/change/delete attributes
- search something
- check that the stream has not ended in MudSocket, it will return a null
pointer. ugly.
- setAttribute+removeAttribute should submit information to the database.
BUT NOT FOR ItemDefs!

- open something/close something
- look <IN> object
- lock something/unlock something
- check that a person does not wield more than one thing.

- events:
  openevent(person, item)
	- occurrs when item is successfully opened by a person
	- methodname found in attribute "openevent"
	- refers to source code in methods table
	- attribute available in item
  closeevent(person, item)
	- occurrs when item is successfully closed by a person
	- methodname found in attribute "closeevent"
	- refers to source code in methods table
	- attribute available in item
  receiveitemevent(person, person, item)
  enterevent(person, room)
  leaveevent(person, room)
- check if an object is being wielded.
- IMPORTANT! If any one command/event/method is generating an exception,
make certain that it it removed from the list of executable commands, and that
the "callable" field in the database is deactivated.
- add 'fight' and 'stop fighting' commands to the help.

Items
-----
The following kind of items are possible:
- DRINK
- FOOD
- ARMOUR
- WEAPON
- JEWELRY
- GUILDITEM
- MAGICITEM
- NORMAL

An Item has a getter "isSellable" containing most of the logic about wehter
or not an item is sellable.

Containers
----------

Containers are special items that can contain other items. Containers, teh
same as normal items, have an ItemDefinition.

The ItemDefinition determines if an item is a container or not.
It does this in a variety of ways. First of all, if the 'container' field is
set to 'yes', the item is a container, capable of containing other items.

If the 'isopenable' field is set to 'yes' the container can be opened and
closed.

if the 'keyid' field is set to a VALID itemdefinition, an item of that
definition is to be used to lock or unlock the container.

As this means that a container has a varying number of states, attributes
are used per container:

name: islocked value: false value_type: boolean
name: isopen value: true value_type: boolean
name: isopenable value: true value_type: boolean

A container cannot contain a non-empty container. We are not going to have
infinite-level-depth containers. That way madness lies.

Guilds
-----

A. Below text issues the following commands:
- admin guildcreate GUILDNAME DAYSGUILDDEATH MINGUILDMEMBERS BOSSNAME
- guildapply GUILDNAME
- guildqual
- guilddetails USERNAME
- guildaccept USERNAME
- guildreject USERNAME
- guildassign USERNAME, "ROLE"
- guildexile USERNAME, REASON
- guildtalk MESSAGE
- guildhome
- guilddonate
- guildhomeset
- guilddonateset

mm_guilds
* name
  daysguilddeath
  minguildmembers
  guilddescription
  guildurl
attributes:
- guildname

First, you need to use the guildcreate command to create a new guild. You
have to get at least MINGUILDMEMBERS amount of new members before it will
activate you (Set in the INI file). Activation means you will be visible in
the listing, can buy land for the guild, can have guild bank accounts, and can
hire mobs, as well as have politics with others.

Once you've made your guild, people can 'guildapply' to the guild. Of course,
the person has to be at least level MINGUILDLEVEL (Set in the INI file).
'guildapply' can be done even if you're the only one online. Clan bosses can
set qualifications to the guild with the 'guildqual' command and both bosses
and leaders will see new applicants in their 'guilddetails' screen, at which
point, they can 'guildaccept' or 'guildreject' the player (regardless of
online status). Clan bosses can also 'guildassign' people roles, such as
treasurer, leader, or even boss. Clan bosses and leaders may, at any time,
'guildexile' a member - as well as members can 'guildresign'

Once you're accepted into a guild, you can use the guildtalk channel to talk
to your guild, as well as use the 'Clan Home' and 'Clan Donate' spells. The
'guildhome' location and the 'guilddonate' location can be set by bosses using
the 'guildhomeset' and 'guilddonateset' commands. Bosses and treasurers may
deal with any Clan bankers in your game. If MINGUILDMEMBERS don't at least
login in DAYSGUILDDEATH days, then the guild will be purged automatically. 
http://www.turf.org/helps/

GUILDITEMS=> a guild should have special items, that can only be shared/used
among guildmembers. Changes from guild to another guild automatically destroy
guilditems or something.

Shopkeepers
-----------

Shopkeepers buy and sell items. Some shopkeepers will only allow selling and
buying of specific items. 
Shopkeepers have a finite amount of money, when the money runs out, the
shopkeeper will not buy items.
If an item does not appear in the list of buyable/sellable items, it will
not be sold/bought.
You can only buy items that the shopkeepers has in his/her inventory.

Issue: how do I determine what a shopkeeper has for sale at the moment.
answer: special item? in database with special attribute? A sort of "View"
item.

Issue: how do I determine how much a shopkeeper is willing to give for a
certain item?
answer: show item

Current commands for shopkeepers:
buy <item> from <shopkeeper>
sell <item> to <shopkeeper>
show <item> to <shopkeeper>

Money
-----

- remove gold,silver from mm_usertable. Keep copper for use as a base-value
for the amount of money someone has.
- remove gold, silver from mm_items. Keep copper for use as a base-value
for the amount of money someone has.
Money is not an Item unless it is part of a room/item.
When retrieving money from a room/corpse => moneybag, moneypouch, coinbag
There is never any loose change.
- a Room does not contain coins, a room contains moneybags.
- There is never 10 silver coins, it is always 1 gold
- There is never 10 copper coins, it is always 1 silver
- Fortune 500 list
- Ziektekostenverzekering
- een Baan (blacksmith, fisherman)

impacts the following objects:
- SellCommand
- BuyCommand
- DropCommand
- GetCommand
- PutCommand
- RetrieveCommand
- Database
- Person
- Item
- Room

Menders
-------

Items have, for each, a 'condition', for example: mint condition, perfect
condition, bad shape, worse.
Itemdefs define a 'maxcondition', which is by default a maximum of 28*6=168
days. (a little less than half a year).
Items that are newly created automatically have the maximum condition.
Every day, the items deteriorate a little (crontab?).
When deterioration reaches zero, the item is disintegrated!
Items can be repaired, bringing their condition back to 'mint' by repairmen.
There are general items, specific items, that can be <I>mended</I> by
<I>menders</I> (think: repairmen).

