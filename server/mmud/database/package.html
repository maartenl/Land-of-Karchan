<html>
<head>
</head>
<body bgcolor="white">

Provides access to the database. All database access must go through this
class, in order to keep database specific code isolated from other parts of
the game.<p>
All database centric methods have "default" package scope, so they can be
used only within this package. All public methods will never return database
objects. This keeps the database part separate from the mud.<P>
All fields that can carry a yes/no or true/false bit are stored as an 
integer containing either 0 (no/false) or 1 (yes/true).<P> 
</PRE>

Database structure is the following:
<P>(<I>* denotes primary key</I>)
<TABLE>
<TR><TD>Tablename</TD><TD>Description</TD></TR>
<TR><TD>mm_roomattributes</TD><TD>Attributes of a certain room.</TD></TR>
<TR><TD>mm_charattributes</TD><TD>Attributes of a certain character (player/non-player).</TD></TR>
<TR><TD>mm_itemattributes</TD><TD>Attributes of a certain item.</TD></TR>
<TR><TD>mm_logonmessage</TD><TD>The logon message provided upon logon.</TD></TR>

<TR><TD>mm_sillynamestable</TD><TD></TD></TR>
<TR><TD>mm_unbantable</TD><TD></TD></TR>
<TR><TD>mm_bantable</TD><TD></TD></TR>
<TR><TD>mm_errormessages</TD><TD></TD></TR>
<TR><TD>mm_help</TD><TD></TD></TR>

<TR><TD>mm_items</TD><TD>Provides item definitions. So, basically, if you have 
a bucket, the definition would be in this table, wile actual instances of the 
bucket being carried around are in the table mm_itemtable. This table should 
contain characteristics common to all buckets.</TD></TR>
<TR><TD>mm_shopkeeperitems</TD><TD>Provides wich items a shopkeeper is
allowed to sell/buy and when the shopkeeper decides to stop buying items
from characters (i.e. when the shop has plenty of those specific items in
supply)</TD></TR>
<TR><TD>mm_itemtable</TD><TD>Provides instances of item definitions.</TD></TR>
<TR><TD>mm_charitemtable</TD><TD>Indicates who is carrying which item instances.</TD></TR>
<TR><TD>mm_itemitemtable</TD><TD>Indicates which item instances contain which item instances.</TD></TR>
<TR><TD>mm_roomitemtable</TD><TD>Indicates which room contains which item instances </TD></TR>

<TR><TD>mm_rooms</TD><TD>Contains room definitions.</TD></TR>
<TR><TD>mm_area</TD><TD>Provides an clustering of rooms called an area.
Every room is identified as belonging to a area, the main area being
called "<I>Main</I>".</TD></TR>
<TR><TD>mm_usertable</TD><TD>Contains all characters in the game.</TD></TR>
<TR><TD>mm_mailtable</TD><TD>Contains mud mail of characters in the game</TD></TR>
<TR><TD>mm_boards</TD><TD>Identifies individual public message boards,</TD></TR>
<TR><TD>mm_boardmessages</TD><TD>Contains all messages posted on the public
message boards.</TD></TR>

<TR><TD>mm_log</TD><TD>Logging table, for describing important events in the
life of characters and administrators.</TD></TR>
<TR><TD></TD><TD></TD></TR>
</TABLE>
<PRE>
+---------------------+
| mm_itemattributes   |
+---------------------+
|*name                |
| value               |
| value_type          |
|*id                  |
+---------------------+

+---------------------+
| mm_roomattributes   |
+---------------------+
|*name                |
| value               |
| value_type          |
|*id                  |
+---------------------+

+---------------------+
| mm_charattributes   |
+---------------------+
|*name                |
| value               |
| value_type          |
|*charname            |
+---------------------+

</PRE>
<H3>mm_items</H3>
<DL>
<DT>id
<DD>identification of this item definition, integer.
<DT>wieldable
<DD>no longer used
<DT>wearable
<DD>how this item is to be worn as a bitmask, integer. Values :
1=head,2=neck,4=torso,8=arms,16=leftwrist,32=rightwrist,64=leftfinger,
128=rightfinger,256=feet,512=hands,1024=floating,2048=waist,
4096=legs,8192=eyes,16384=ears,32768=body,65536=wield lefthand,
131072=wield righthand,262144=wielding both hands
<DT>container
<DD>wether or not this item can server as a container for other items.
Possible values are 0 (no container) or 1 (container).
<DT>getable
<DD>wether or not the item can be picked up from the floor. <B>Important:</B> items with a
negative id number, are <I>never</I> getable and are mostly used as
windowdressing for rooms. In this case the field value is ignored by the mud.
<DT>dropable
<DD>wether or not the item can be dropped unto the floor. <B>Important:</B> items with a
negative id number, are <I>never</I> dropable and are mostly used as
windowdressing for rooms. In this case the field value is ignored by the mud.
<DT>visible
<DD>will make the item visible or invisible when in a room or in an
inventory. The default is <I>visible</I>. 
<DT>owner
<DD>the owner of the object, i.e. the one that is allowed to make changes.
If this is NULL, the first one to make any changes owns the item.
<DT>creation
<DD>timestamp, is updated with the current datetime 
whenever a change takes place on the record in question.
</DL>
<PRE>
+---------------------+
| mm_shopkeeperitems  |
+---------------------+
|*id                  |
| max                 |
|*charname            |
+---------------------+

+---------------------+
| mm_itemtable        |
+---------------------+
|*id                  |
| itemid              |
+---------------------+

</PRE>
<H3>mm_charitemtable</H3>
<DL>
<DT>id
<DD>identification of this item instance
<DT>belongsto
<DD>who owns this item instance
<DT>wearing
<DD>are you wearing or wielding the item. wearing==null means that the item
is neither being worn nor wielded.
</DL>
<PRE>
+---------------------+
| mm_charitemtable    |
+---------------------+
|*id                  |
| belongsto           |
| wearing             |
+---------------------+

+---------------------+
| mm_roomitemtable    |
+---------------------+
|*id                  |
| room                |
| search              |
+---------------------+

+---------------------+
| mm_itemitemtable    |
+---------------------+
|*id                  |
| containerid         |
+---------------------+

+---------------------+
| mm_rooms            |
+---------------------+
|*id                  |
| west                |
| east                |
| north               |
| south               |
| up                  |
| down                |
| contents            |
| owner               |
| creation            |
| area                |
+---------------------+

+---------------------+
| mm_area             |
+---------------------+
|*area                |
| description         |
| shortdesc           |
| owner               |
| creation            |
+---------------------+

</PRE>
<H3>mm_usertable</H3>
<DL>
<DT>name
<DD>identification of this character
<DT>god
<DD>what this character is, 0=default user, 1=god user (not used currently),
2=bot, 3=mob
<DT>alignment
<DD>the good or evil aspect of a character, 0 is evil, 8 is good, and 
anything in between. The default is 8.
<DT>movementstats
<DD>the ability to move, 0 is exhausted and cannot move, 1000 is fine. The
default is 1000.
</DL>
<PRE>
+---------------------+
| mm_usertable        |
+---------------------+
|*name                |
| god                 |
| alignment           |
| movementstats       |
+---------------------+

+---------------------+
| mm_logonmessage     |
+---------------------+

</PRE>
<H3>mm_mailtable</H3>
<DL>
<DT>haveread
<DD>if the mail items has been read or not. (read=1, not read=0)
<DT>newmail
<DD>if the mail is new (i.e. has not been read since the previous
session.
</DL>
<PRE>
+---------------------+
| mm_mailtable        |
+---------------------+
|*name                |
| toname              |
| header              |
|*whensent            |
| haveread            |
| newmail             |
| message             |
+---------------------+

+---------------------+
| mm_sillynamestable  |
+---------------------+

+---------------------+
| mm_unbantable       |
+---------------------+

+---------------------+
| mm_bantable         |
+---------------------+

+---------------------+
| mm_errormessages    |
+---------------------+

+---------------------+
| mm_help             |
+---------------------+

+---------------------+
| mm_log              |
+---------------------+
|*creation            |
|*name                |
| message             |
+---------------------+

+---------------------+
| mm_boards           |
+---------------------+
|*id                  |
| name                |
| description         |
| owner               |
| creation            |
+---------------------+

+---------------------+
| mm_boardmessgages   |
+---------------------+
|*boardid             |
|*name                |
|*posttime            |
| message             |
+---------------------+
</PRE>

The following tables are not related directly to the mud. They are used
mainly for information regarding webside scripts. These tables are easily
recognized because they do not start with the prefix "mm_".<P>
(<I>* denotes primary key</I>)
<TABLE>
<TR><TD>Tablename</TD><TD>Description</TD></TR>
<TR><TD>characterinfo</TD><TD>contains story information regarding certain
characters.</TD></TR>
<TR><TD>family</TD><TD>shows the family relations between characters.</TD></TR>
<TR><TD>familyvalues</TD><TD>provides a number of possible family relations.
</TD></TR>
<TR><TD>polls</TD><TD>contains the different polls.</TD></TR>
<TR><TD>poll_choices</TD><TD>contains the possible choices per poll.
</TD></TR>
<TR><TD>poll_values</TD><TD>contains the answers of users to the different
polls.</TD></TR>
<TR><TD></TD><TD></TD></TR>
</TABLE>
<PRE>
+---------------------+
| characterinfo       |
+---------------------+
|*name                |
| imageurl            |
| homepageurl         |
| dateofbirth         |
| cityofbirth         |
| storyline           |
+---------------------+

+---------------------+
| family              |
+---------------------+
|*name                |
|*toname              |
| description         |
+---------------------+

+---------------------+
| familyvalues        |
+---------------------+
|*id                  |
| description         |
+---------------------+

+---------------------+
| polls               |
+---------------------+
|*id                  |
| title               |
| description         |
| closed              |
+---------------------+

+---------------------+
| poll_choices        |
+---------------------+
|*id                  |
|*pollid              |
| choice              |
+---------------------+

+---------------------+
| poll_values         |
+---------------------+
|*id                  |
|*name                |
| value               |
| comments            |
+---------------------+
</PRE>

</body>
</html>
